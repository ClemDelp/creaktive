<!-- Javascript libs -->
<script type="text/javascript" src="js/vendor/jquery.fileDownload.js"></script>
<script type="text/javascript" src="js/vendor/jquery.iframe-transport.js"></script>
<script type="text/javascript" src="js/vendor/keypress.js"></script>

<script src="/js/jquery.mousewheel.min.js"></script>
<script src="/js/jquery.watch.min.js"></script>
<!-- to export map to image -->
<script src="/js/vendor/html2canvas.js"></script>
<script type="text/javascript" src="/js/vendor/canvg.js"></script> 
<script src="/js/vendor/canvas-to-blob.js"></script>

<script type="text/javascript" src="/js/vendor/rgbcolor.js"></script> 
<script type="text/javascript" src="/js/vendor/stackblur.js"></script>
<!-- jquery ui -->
<link rel="stylesheet" href="/styles/themes/base/jquery.ui.all.css">
<script src="/js/ui/jquery.ui.core.js"></script>
<script src="/js/ui/jquery.ui.widget.js"></script>
<script src="/js/ui/jquery.ui.mouse.js"></script>
<script src="/js/ui/jquery.ui.draggable.js"></script>
<script src="/js/ui/jquery.ui.resizable.js"></script>
<script src="/js/ui/jquery.ui.button.js"></script>
<script src="/js/ui/jquery.ui.dialog.js"></script>
<!-- ******************************** -->
<!-- jsplumb -->
<link rel="stylesheet" href="styles/jsplumb/jsplumb.css?v=<%= sails.config.session.version %>">
<link rel="stylesheet" href="styles/jsplumb/demo.css?v=<%= sails.config.session.version %>">
<!-- ******************************** -->
<!-- Base64Binary -->
<script src="/js/Base64Binary.js"></script>
<!-- ******************************** -->
<!-- CKEditor -->
<script src="/js/ckeditor/ckeditor.js"></script>
<!-- ******************************** -->
<!-- Modules to load -->
<%- partial('../app/templates/together_templates') %>
<script type="text/javascript" src="js/BB_app/modules/together.js?v=<%= sails.config.session.version %>"></script>

<%- partial('../app/templates/imagesList_templates') %>
<%- partial('../app/templates/modelEditor_templates') %>
<%- partial('../app/templates/css3_templates') %>
<%- partial('../app/templates/templatesList_templates') %>

<%- partial('../app/templates/nodesMapping_templates') %>
<%- partial('../app/templates/title_templates') %>
<%- partial('templates/bbmap_templates') %>
<%- partial('../app/templates/title_templates') %>

<%- partial('../app/templates/workspaceEditor_templates') %>
<script type="text/javascript" src="js/BB_app/modules/workspaceEditor.js?v=<%= sails.config.session.version %>"></script>

<%- partial('../app/templates/importData_templates') %>
<script type="text/javascript" src="js/BB_app/modules/importData.js?v=<%= sails.config.session.version %>"></script>

<%- partial('../app/templates/usersList_templates') %>
<script type="text/javascript" src="js/BB_app/modules/usersList.js?v=<%= sails.config.session.version %>"></script>

<script type="text/javascript" src="js/BB_app/modules/modelEditor.js?v=<%= sails.config.session.version %>"></script>

<%- partial('../app/templates/comments_templates') %>
<script type="text/javascript" src="js/BB_app/modules/comments.js?v=<%= sails.config.session.version %>"></script>

<%- partial('../app/templates/timela_templates.ejs') %>
<script src="js/BB_app/modules/timela.js?v=<%= sails.config.session.version %>"></script>

<%- partial('../app/templates/attachment_templates') %>
<script type="text/javascript" src="js/BB_app/modules/attachment.js?v=<%= sails.config.session.version %>"></script>

<script type="text/javascript" src="js/BB_app/modules/imagesList.js?v=<%= sails.config.session.version %>"></script>
<script type="text/javascript" src="js/BB_app/modules/css3.js?v=<%= sails.config.session.version %>"></script>
<script type="text/javascript" src="js/BB_app/modules/templatesList.js?v=<%= sails.config.session.version %>"></script>
<script type="text/javascript" src="js/BB_app/modules/nodesMapping.js?v=<%= sails.config.session.version %>"></script>


<script type="text/javascript" src="js/BB_app/modules/bbmap.js?v=<%= sails.config.session.version %>"></script>
<script type="text/javascript" src="js/BB_app/modules/bbmap_node.js?v=<%= sails.config.session.version %>"></script>
<script type="text/javascript" src="js/BB_app/modules/bbmap_main.js?v=<%= sails.config.session.version %>"></script>


<!-- ******************************** -->
<!-- Script -->
<script>

   ///////////////////////////////////////////////////
  $(document).ready(function () { 
    console.log( "CreaKtive DOM loaded!" );
    ////////////////////////////////////////
    $('#creaktive_window').height($(window).height());
    //$('#creaktive_window').css('min-height', $(window).height()+'px');
    ////////////////////////////////////////
    Backbone.Model.prototype.toJSON = function() {
      return JSON.parse(JSON.stringify(this.attributes));
    };
    ////////////////////////////////////////
    rt(io, function(){
      var json = {};
      json.project = <%- currentProject %>;
      json.project_users = <%- project_users %>;
      json.users = <%- users %>;
      json.user = <%- currentUser %>;
      json.projects = <%- projects %>;
      json.news = <%- news %>;
      json.elements = <%- elements %>;      
      json.links = <%- links %>;
      json.notifications = <%- notifications %>;
      json.permissions = <%- permissions %>;
      json.backups = <%- backups %>;
      json.comments = <%- comments %>;
      json.attachments = <%- attachments %>;

      global.init(json, function(){
        // Modules
        topbar.init({el:"#topbar_container"});
        bbmap.init();
        //together.init();
        $("#title_page").html(json.project.title);
        /*activat of "hashchange events's monitoring"*/
        if(!Backbone.History.started) Backbone.history.start();
        $(document).foundation();
        
      });
    });

  });

</script>


<!-- La lib du stagiaire -->
<script src="js/vendor/TreeClassification.js?v=<%= sails.config.session.version %>"></script>     
<!-- JS -->
<!-- support lib for bezier stuff -->
<script src="js/jsplumb/lib/jsBezier-0.6.js"></script>     
<!-- event adapter -->
<script src="js/jsplumb/lib/mottle-0.2.js"></script>
<!-- geometry functions -->
<script src="js/jsplumb/lib/biltong-0.2.js"></script>
<!-- drag -->
<script src="js/jsplumb/lib/katavorio-0.1.js"></script>
<!-- jsplumb util -->
<script src="js/jsplumb/src/util.js"></script>
<!-- base DOM adapter -->
<script src="js/jsplumb/src/dom-adapter.js"></script>        
<!-- main jsplumb engine -->
<script src="js/jsplumb/src/jsPlumb.js"></script>
<!-- endpoint -->
<script src="js/jsplumb/src/endpoint.js"></script>                
<!-- connection -->
<script src="js/jsplumb/src/connection.js"></script>
<!-- anchors -->
<script src="js/jsplumb/src/anchors.js"></script>        
<!-- connectors, endpoint and overlays  -->
<script src="js/jsplumb/src/defaults.js"></script>
<!-- bezier connectors -->
<script src="js/jsplumb/src/connectors-bezier.js"></script>
<!-- state machine connectors -->
<script src="js/jsplumb/src/connectors-statemachine.js"></script>
<!-- flowchart connectors -->
<script src="js/jsplumb/src/connectors-flowchart.js"></script>
<script src="js/jsplumb/src/connector-editors.js"></script>
<!-- SVG renderer -->
<script src="js/jsplumb/src/renderers-svg.js"></script>
<!-- vml renderer -->
<script src="js/jsplumb/src/renderers-vml.js"></script>
<!-- no library jsPlumb adapter -->
<script src="js/jsplumb/src/dom.jsPlumb.js"></script>
<!-- /JS -->

<!--  demo code -->
