<!-- CSS -->
<link rel="stylesheet" href="styles/map.css">

<!-- Javascript libs -->
<script type="text/javascript" src="js/vendor/jquery.mousewheel-3.1.3.js"></script>
<script src="js/vendor/jquery.hotkeys.js"></script>
<script src="js/vendor/jquery.hammer.min.js"></script>
<script type="text/javascript" src="js/vendor/kinetic-v4.4.3.js"></script>
<script src="js/vendor/color-0.4.1.min.js"></script>
<script type="text/javascript" src="js/mapjs/kinetic.clip.js"></script>
<script type="text/javascript" src="js/mapjs/kinetic.idea.js"></script>
<script type="text/javascript" src="js/mapjs/kinetic.idea.proxy.js"></script>
<script type="text/javascript" src="js/mapjs/kinetic.connector.js"></script>
<script type="text/javascript" src="js/mapjs/observable.js"></script>
<script type="text/javascript" src="js/mapjs/mapjs.js"></script>
<script type="text/javascript" src="js/mapjs/url-helper.js"></script>
<script type="text/javascript" src="js/mapjs/content.js"></script>
<script type="text/javascript" src="js/mapjs/layout.js"></script>
<script type="text/javascript" src="js/mapjs/layout-compressor.js"></script>
<script type="text/javascript" src="js/mapjs/map-model.js"></script>
<script type="text/javascript" src="js/mapjs/kinetic-mediator.js"></script>
<script type="text/javascript" src="js/mapjs/map-toolbar-widget.js"></script>
<script type="text/javascript" src="js/mapjs/png-exporter.js"></script>
<script type="text/javascript" src="js/mapjs/map-widget.js"></script>
	


<!-- Templates to load -->
<%- partial('./templates/concepts_template') %>
<%- partial('./templates/knowledges_template') %>
<%- partial('./templates/visualization_template') %>


<!-- Javascript libs -->
<script type="text/javascript" src="js/vendor/socket.io.js"></script>
<script type="text/javascript" src="js/sails.io.js"></script>

<script src="js/BB_app/global_functions.js"></script>
<!-- Interface client/server -->
<script type="text/javascript" src="js/BB_app/app.js"></script>

<script type="text/javascript">
	/////////////////////////////////////////////////////////////////////////////////////////////
// Document ready
/////////////////////////////////////////////////////////////////////////////////////////////
$(document).ready(function () {

  Backbone.Model.prototype.toJSON = function() {
    return JSON.parse(JSON.stringify(this.attributes));
  };
  // Initialisation de l'managerlication ici
  console.log( "CreaKtive DOM loaded!" );

  rt(io, function(){
    // Globales variables
    global.init(function(){
      ////////////////////////////////////////
      // Global Router
      ////////////////////////////////////////

      concepts.init();
     
      ////////////////////////////////////////

      /*activat of "hashchange events's monitoring"*/
      Backbone.history.start();
    });

  });

}) ;

/////////////////////////////////////////////////////////////////////////////////////////////
// Realtime connection
/////////////////////////////////////////////////////////////////////////////////////////////
function rt (io, callback) {
  // as soon as this file is loaded, connect automatically, 
  var socket = io.connect();
  socket.on('connect', function socketConnected() {
    // Listen for Comet messages from Sails
    socket.on('message', function messageReceived(message) {     
      console.log('New comet message received :: ', message);
    });
    console.log(
        'Socket is now connected and globally accessible as `socket`.\n' + 
        'e.g. to send a GET request to Sails, try \n' + 
        '`socket.get("/", function (response) ' +
        '{ console.log(response); })`'
    );
    callback();
  });

  window.socket = socket;

};
</script>
<!-- Global objects -->
<script src="js/BB_app/global_models.js"></script>
<script src="js/BB_app/global_collections.js"></script>

<!-- Modules situÃ©s dans assets/js/BB_app -->

<script type="text/javascript" src="js/BB_app/modules/concepts.js"></script>

